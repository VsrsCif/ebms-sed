<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:composite="http://java.sun.com/jsf/composite"
      >
    <composite:interface>
    </composite:interface>

    <composite:implementation >
        <!-- sed-box ADD/EDIT dialog! -->

        <p:dialog   header="SEDKeyStore detail" widgetVar="keyStoreDialog" modal="true" hideEffect="fade" resizable="true" appendTo="@(body)">
            <h:form id="keyStoreForm">
                <p:layout id="keyStoreDetails" style="min-width:850px;min-height:3240px;">
                    <p:layoutUnit position="north" rendered="#{not empty adminSEDKeyStores.editable}" >
                        <p:panelGrid  columns="4" columnClasses="label,value,label,value" >

                            <h:outputText value="File path:" />
                            <p:inputText id="filepath" value="#{adminSEDKeyStores.editable.filePath}"  />
                            <h:outputText value="Type" />
                            <p:inputText id="jkstype" value="#{adminSEDKeyStores.editable.type}"  />

                            <h:outputText value="Password:" />
                            <p:inputText  value="#{adminSEDKeyStores.editable.password}"  />
                            <!--p:commandButton value="Test store access"/ -->
                            <!--h:outputText value="Access result?" /-->

                        </p:panelGrid>
                    </p:layoutUnit>
                    <p:layoutUnit position="center" rendered="#{not empty adminSEDKeyStores.editable}" >
                        <p:dataTable value="#{adminSEDKeyStores.editable.SEDCertificates}" 
                                     var="crt" style="width:830px" >
                            <p:column headerText="alias"  width="120">
                                <h:outputText value="#{crt.alias}" />
                            </p:column>     
                            <p:column headerText="IssuerDN" >
                                <h:outputText value="#{crt.issuerDN}" />
                            </p:column>     
                            <p:column headerText="SubjectDN" >
                                <h:outputText value="#{crt.subjectDN}" />
                            </p:column>     
                            <p:column headerText="Valid from" width="60">
                                <h:outputText value="#{crt.validFrom}"  ><f:convertDateTime pattern="dd.MM.yyyy" timeZone="CET" /></h:outputText>
                            </p:column>     
                            <p:column headerText="Valid to" width="60">
                                <h:outputText value="#{crt.validTo}"  ><f:convertDateTime pattern="dd.MM.yyyy" timeZone="CET" /></h:outputText>
                            </p:column>     
                            <p:column headerText="isKey" width="20">
                                <h:outputText value="#{crt.keyEntry}"/>
                            </p:column>     
                            <p:column headerText="Password" width="100">
                                <p:inputText value="#{crt.keyPassword}" rendered="#{crt.keyEntry}"/>                        
                            </p:column>     

                        </p:dataTable>

                    </p:layoutUnit>


                    <p:layoutUnit position="south">
                        <p:commandButton value="Ok"  styleClass="toolbar-Button" 
                                         icon="ui-icon-sed-ok" 
                                         action="#{adminSEDKeyStores.addOrUpdateEditable()}"
                                         oncomplete="PF('keyStoreDialog').hide()" 
                                         update=":forms:SettingsCertPanel:TblKeyStores"
                                         />
                        <p:commandButton value="Cancel" styleClass="toolbar-Button" 
                                         icon="ui-icon-sed-cancel" oncomplete="PF('keyStoreDialog').hide()" 
                                         />
                    </p:layoutUnit>

                </p:layout>
            </h:form>
        </p:dialog>

    </composite:implementation>

</html>
